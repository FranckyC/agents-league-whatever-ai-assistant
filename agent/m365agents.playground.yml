# yaml-language-server: $schema=https://aka.ms/m365-agents-toolkits/v1.9/yaml.schema.json
# Visit https://aka.ms/teamsfx-v5.0-guide for details on this file
# Visit https://aka.ms/teamsfx-actions for details on actions
version: v1.9

deploy:
  # Install development tool(s)
  - uses: devTool/install
    with:
      testTool:
        version: ~0.2.7
        symlinkDir: ./devTools/playground

  # Run npm command
  # - uses: cli/runNpmCommand
  #   with:
  #     args: install --no-audit

  # Generate runtime environment variables
  - uses: file/createOrUpdateEnvironmentFile
    with:
      target: ./.localConfigs.playground
      envs:
        ENV_AZURE_DEPLOY_WORKFLOW_AGENT: ${{ENV_AZURE_DEPLOY_WORKFLOW_AGENT}}
        ENV_AZURE_DEPLOY_AI_FOUNDRY_PROJECT_ENDPOINT: ${{ENV_AZURE_DEPLOY_AI_FOUNDRY_PROJECT_ENDPOINT}}
        ENV_AZURE_APP_TENANT_ID: ${{ENV_AZURE_APP_TENANT_ID}}
        ENV_AZURE_APP_CLIENT_ID: ${{ENV_AZURE_APP_CLIENT_ID}}
        ENV_AZURE_APP_CLIENT_SECRET: ${{ENV_AZURE_APP_CLIENT_SECRET}}
        TEAMSFX_NOTIFICATION_STORE_FILENAME: ${{TEAMSFX_NOTIFICATION_STORE_FILENAME}}